---
- name: AWX Output Line Break Test v1
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    test_ip: "172.23.40.176"
    test_mac: "e8:b0:c5:ca:71:f5"
    test_description: "Daphne_NB_WLAN"
    dhcp_operation_type: "UPDATE"
    address_operation_type: "UPDATE"
    dhcp_needs_operation: false
    address_needs_operation: false
    group_needs_operation: false

  tasks:
    - name: "ğŸ§ª Test 1: Basic Multi-line with |- syntax"
      ansible.builtin.debug:
        msg: "{{ test_msg_1 }}"
      vars:
        test_msg_1: |-
          ğŸ§ª æ¸¬è©¦1: åŸºæœ¬å¤šè¡Œè¼¸å‡º
          
          é€™æ˜¯ç¬¬ä¸€è¡Œ
          é€™æ˜¯ç¬¬äºŒè¡Œ
          é€™æ˜¯ç¬¬ä¸‰è¡Œ

    - name: "ğŸ§ª Test 2: Complex Multi-line with Variables"
      ansible.builtin.debug:
        msg: "{{ test_msg_2 }}"
      vars:
        test_msg_2: |-
          ğŸ§ª æ¸¬è©¦2: åŒ…å«è®Šæ•¸çš„å¤šè¡Œè¼¸å‡º
          
          åŸºæœ¬åƒæ•¸:
          - IP: {{ test_ip }}
          - MAC: {{ test_mac }}
          - æè¿°: {{ test_description }}
          
          æ“ä½œç‹€æ…‹:
          - DHCPæ“ä½œ: {{ dhcp_operation_type }} | {{ 'éœ€è¦åŸ·è¡Œ' if dhcp_needs_operation else 'è·³é' }}
          - Addressæ“ä½œ: {{ address_operation_type }} | {{ 'éœ€è¦åŸ·è¡Œ' if address_needs_operation else 'è·³é' }}

    - name: "ğŸ§ª Test 3: Error Message Format"
      ansible.builtin.debug:
        msg: "{{ error_msg }}"
      vars:
        error_msg: |-
          âŒ IPåœ°å€è¶…å‡ºDHCP Serverè‡ªå®šç¾©ç¯„åœï¼
          
          è©³æƒ…ï¼š
          - ç›®æ¨™IP: {{ test_ip }}
          - DHCP Server ID: 2 (vlan40_PC)
          - è‡ªå®šç¾©å…è¨±ç¯„åœ: 172.23.40.150 - 172.23.40.240
          - ç¶²æ®µå‰ç¶´: 172.23.40 (å¾APIè®€å–)
          - APIåŸå§‹ç¯„åœ: 172.23.40.11 - 172.23.40.147
          
          è§£æ±ºæ–¹æ¡ˆï¼š
          1. é¸æ“‡è‡ªå®šç¾©ç¯„åœå…§çš„IPåœ°å€
          2. æˆ–è€…é¸æ“‡æ­£ç¢ºçš„DHCP Server ID

    - name: "ğŸ§ª Test 4: Preview Complete Format"
      ansible.builtin.debug:
        msg: "{{ preview_msg }}"
      vars:
        preview_msg: |-
          ğŸ¯ ä¸‰éšæ®µæ•´åˆé è¦½å®Œæˆ | ç‰ˆæœ¬: v2.1
          
          æ‘˜è¦:
          - éšæ®µ1 (DHCP): {{ dhcp_operation_type }} | {{ 'éœ€è¦åŸ·è¡Œ' if dhcp_needs_operation else 'è·³é' }}
          - éšæ®µ2 (Address): {{ address_operation_type }} | {{ 'éœ€è¦åŸ·è¡Œ' if address_needs_operation else 'è·³é' }}
          - éšæ®µ3 (Group): ADD_MEMBER | {{ 'éœ€è¦åŸ·è¡Œ' if group_needs_operation else 'è·³é' }}
          
          ç›®æ¨™: {{ test_ip }} | {{ test_mac }} | {{ test_description }}
          ç­‰å¾…äººå·¥ç¢ºèª...

    - name: "ğŸ§ª Test 5: Conditional Content"
      ansible.builtin.debug:
        msg: "{{ conditional_msg }}"
      vars:
        show_details: true
        conditional_msg: |-
          ğŸ“Š éšæ®µ1: DHCP æ“ä½œåˆ†æ
          
          æ“ä½œé¡å‹: {{ dhcp_operation_type }}
          éœ€è¦åŸ·è¡Œ: {{ 'æ˜¯' if dhcp_needs_operation else 'å¦' }}
          æª¢æŸ¥é…ç½®æ•¸: 5
          {% if show_details %}
          
          ç•¶å‰é…ç½®:
          - ID: 123
          - IP: {{ test_ip }}
          - MAC: {{ test_mac }}
          - æè¿°: {{ test_description }}
          {% endif %}
          {% if not dhcp_needs_operation %}
          
          é…ç½®å·²æ˜¯æœ€æ–°ç‹€æ…‹ï¼Œç„¡éœ€è®Šæ›´
          {% endif %}

    - name: "ğŸ§ª Test 6: Simple vs Complex"
      ansible.builtin.debug:
        msg: "ç°¡å–®å–®è¡Œæ¸¬è©¦: {{ test_ip }} | {{ test_mac }}"

    - name: "ğŸ§ª Test 7: Using |2 syntax (alternative)"
      ansible.builtin.debug:
        msg: "{{ alt_msg }}"
      vars:
        alt_msg: |2
          ğŸ”§ æ›¿ä»£èªæ³•æ¸¬è©¦
          
            ç¸®æ’æ¸¬è©¦ç¬¬ä¸€è¡Œ
            ç¸®æ’æ¸¬è©¦ç¬¬äºŒè¡Œ
          
          çµæŸæ¸¬è©¦

    - name: "âœ… Test Complete"
      ansible.builtin.debug:
        msg: "{{ complete_msg }}"
      vars:
        complete_msg: |-
          âœ… AWX è¼¸å‡ºæ–·è¡Œæ¸¬è©¦å®Œæˆ
          
          å¦‚æœä»¥ä¸Šæ‰€æœ‰æ¸¬è©¦éƒ½èƒ½æ­£ç¢ºé¡¯ç¤ºå¤šè¡Œæ ¼å¼ï¼Œ
          è¡¨ç¤ºæ–¹æ¡ˆ5æœ‰æ•ˆï¼Œå¯ä»¥å¥—ç”¨åˆ°å®Œæ•´çš„playbookä¸­ã€‚
          
          æ¸¬è©¦çµæœæ‘˜è¦:
          - åŸºæœ¬å¤šè¡Œ: æ¸¬è©¦1
          - è®Šæ•¸æ’å…¥: æ¸¬è©¦2  
          - éŒ¯èª¤è¨Šæ¯: æ¸¬è©¦3
          - é è¦½æ ¼å¼: æ¸¬è©¦4
          - æ¢ä»¶å…§å®¹: æ¸¬è©¦5
          - ç°¡å–®æ ¼å¼: æ¸¬è©¦6
          - æ›¿ä»£èªæ³•: æ¸¬è©¦7
