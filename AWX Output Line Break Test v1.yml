---
- name: AWX Output Line Break Test v2
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    test_ip: "172.23.40.176"
    test_mac: "e8:b0:c5:ca:71:f5"
    test_description: "Daphne_NB_WLAN"

  tasks:
    - name: "ğŸ§ª Test A: Using pause module"
      ansible.builtin.pause:
        prompt: |-
          ğŸ§ª æ¸¬è©¦A: ä½¿ç”¨pauseæ¨¡çµ„
          
          åŸºæœ¬åƒæ•¸:
          - IP: {{ test_ip }}
          - MAC: {{ test_mac }}
          - æè¿°: {{ test_description }}
          
          é€™æ¨£èƒ½æ­£ç¢ºæ–·è¡Œå—ï¼Ÿ
          æŒ‰ Enter ç¹¼çºŒ...
        seconds: 1

    - name: "ğŸ§ª Test B: Using assert (always true)"
      ansible.builtin.assert:
        that: true
        success_msg: |-
          ğŸ§ª æ¸¬è©¦B: ä½¿ç”¨assertæˆåŠŸè¨Šæ¯
          
          é€™æ˜¯æˆåŠŸè¨Šæ¯çš„å¤šè¡Œæ¸¬è©¦
          ç¬¬ä¸€è¡Œå…§å®¹
          ç¬¬äºŒè¡Œå…§å®¹
          ç¬¬ä¸‰è¡Œå…§å®¹

    - name: "ğŸ§ª Test C: Using fail with when false"
      ansible.builtin.fail:
        msg: |-
          ğŸ§ª æ¸¬è©¦C: ä½¿ç”¨failæ¨¡çµ„ï¼ˆä½†ä¸æœƒçœŸçš„å¤±æ•—ï¼‰
          
          é€™å€‹æ‡‰è©²ä¸æœƒåŸ·è¡Œï¼Œå› ç‚ºwhenæ¢ä»¶æ˜¯false
          ä½†å¦‚æœåŸ·è¡Œäº†ï¼Œèƒ½çœ‹åˆ°æ–·è¡Œå—ï¼Ÿ
      when: false

    - name: "ğŸ§ª Test D: Using shell echo"
      ansible.builtin.shell: |
        echo "ğŸ§ª æ¸¬è©¦D: ä½¿ç”¨shell echo"
        echo ""
        echo "åŸºæœ¬åƒæ•¸:"
        echo "- IP: {{ test_ip }}"
        echo "- MAC: {{ test_mac }}"
        echo "- æè¿°: {{ test_description }}"
        echo ""
        echo "å¤šè¡Œè¼¸å‡ºæ¸¬è©¦å®Œæˆ"
      register: shell_result

    - name: "ğŸ§ª Test D Result: Display shell output"
      ansible.builtin.debug:
        var: shell_result.stdout

    - name: "ğŸ§ª Test E: Using template to file"
      ansible.builtin.template:
        src: test_template.j2
        dest: /tmp/test_output.txt
      vars:
        template_content: |-
          ğŸ§ª æ¸¬è©¦E: ä½¿ç”¨templateæ¨¡çµ„
          
          åŸºæœ¬åƒæ•¸:
          - IP: {{ test_ip }}
          - MAC: {{ test_mac }}
          - æè¿°: {{ test_description }}
          
          é€™æ˜¯templateæ¨¡çµ„çš„æ¸¬è©¦
      ignore_errors: true

    - name: "ğŸ§ª Test E Result: Read template file"
      ansible.builtin.slurp:
        src: /tmp/test_output.txt
      register: template_result
      ignore_errors: true

    - name: "ğŸ§ª Test E Output"
      ansible.builtin.debug:
        msg: "{{ template_result.content | b64decode }}"
      when: template_result is defined and not template_result.failed

    - name: "ğŸ§ª Test F: Using lineinfile for each line"
      ansible.builtin.debug:
        msg: "{{ item }}"
      loop:
        - "ğŸ§ª æ¸¬è©¦F: é€è¡Œè¼¸å‡º"
        - ""
        - "åŸºæœ¬åƒæ•¸:"
        - "- IP: {{ test_ip }}"
        - "- MAC: {{ test_mac }}"
        - "- æè¿°: {{ test_description }}"
        - ""
        - "é€è¡Œè¼¸å‡ºæ¸¬è©¦å®Œæˆ"

    - name: "ğŸ§ª Test G: Using command printf"
      ansible.builtin.command: 
        cmd: "printf \"ğŸ§ª æ¸¬è©¦G: ä½¿ç”¨printf\\\\n\\\\nåŸºæœ¬åƒæ•¸:\\\\n- IP: {{ test_ip }}\\\\n- MAC: {{ test_mac }}\\\\n- æè¿°: {{ test_description }}\\\\n\\\\næ¸¬è©¦å®Œæˆ\\\\n\""
      register: printf_result

    - name: "ğŸ§ª Test G Result: Display printf output"
      ansible.builtin.debug:
        var: printf_result.stdout
